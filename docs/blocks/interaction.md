方块互动(Block Interaction)
==========================

玩家可以与方块有很多种互动，比如说右击、左击、碰撞、在方块上行走、还有挖掘等。

这一节将会包含与方块最常见的互动类型。

玩家右击
--------

由于左击，或者说“击打”，一个方块一般并不会发生什么独特的行为，应该可以说右击，或者“激活”一个方块是最常用的一种互动方式。很幸运，这也是最简单的一种互动方式。

### `onBlockActivated`

这个方法控制了右键的行为，它可能会有点复杂。下面是这个方法的定义：


```java
public boolean onBlockActivated(World worldIn,
                                BlockPos pos,
                                IBlockState state,
                                EntityPlayer playerIn,
                                EnumHand hand,
                                @Nullable ItemStack heldItem,
                                EnumFacing side,
                                float hitX,
                                float hitY,
                                float hitZ)
```

下面是对这个方法的讨论。

#### 参数

前面几个参数很明显，它们是方块的当前世界，位置，和状态。接下来是激活方块的玩家，以及激活时的手。

接下来的一个参数 `heldItem` 是玩家激活方块时拿着的 `ItemStack`。注意这个参数为 `@Nullable`，也就是说这个参数可以为null(即手里没拿东西)。

!!! important

	如果你需要检测玩家手里的物品，请使用方法传进来的这个 `ItemStack`。检测玩家当前握着的物品是不可靠的，因为它可能在激活方块以后已经变了。

最后四个方块都是相互联系的。`side` 很明显是方块被激活的面。 `hitX`，`hitY`，和 `hitZ` 可能没这么明显，他们是方块的碰撞箱上激活点的坐标。它们的范围为0-1，代表玩家点击方块上的确切位置。

#### 返回值

返回的那个boolean到底是什么呢？简单来说，它代表了这个方法是否“做了”什么。如果任何执行了任何动作，那就返回true，这将防止之后的事情发生，比如说物品激活。

!!! important

	在客户端返回 `false` 将会防止这个方法在服务端被调用。通常，我们会检查 `worldIn.isRemote` 并返回 `true`，否则进入正常的激活逻辑。原版中有很多这样的例子，比如说箱子(Chest)

### 用处

激活的用处可以说是无穷的。然而我们仍将介绍一些常用的用处。

#### GUI

方块激活时最常见的用处就是打开一个GUI。许多原版的方块都是这样的，比如说箱子，漏斗，熔炉等。更多的GUI信息可以在[这里（未完成）](GUI)找到。

#### 激活

激活的另一个用处，是激活。这里指的是打开一个开关或者是激活方块执行一个特定的行为。比如说，一个方块可以在激活时发光。原版中可以参考按钮或者拉杆的例子。

!!! important

	`onBlockActivated` 在客户端和服务端都会被调用，所以一定要记住代码所处的[端]。许多东西，比如说打开GUI和变动世界，只需要在服务端调用。

玩家破坏
-------

**未完成**

玩家高亮
-------

**未完成**

实体碰撞
-------

**未完成**

[端]: ../concepts/sides.md